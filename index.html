<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script type="module" async>
        import {DeterministicFiniteAutomata} from "./src/deterministic-finite-automata.js";
        import {StateBase} from "./src/state-base.js";

        let machine;

        async function init() {
            const a = new StateBase("a");
            const b = new StateBase("b");
            const c = new StateBase("c");
            const d = new StateBase("d");

            machine = new DeterministicFiniteAutomata();
            await machine.addStates([a, b, c, d]);

            await machine.defineInputRelations("a", {
                0: "c",
                1: "b",
            });

            await machine.defineInputRelations("b", {
                0: "d",
                1: "a"
            })

            await machine.defineInputRelations("c", {
                0: "a",
                1: "d"
            })

            await machine.defineInputRelations("d", {
                0: "b",
                1: "c"
            })

            await machine.start("a", "d");
        }

        async function performInput() {
            console.log(machine.currentState.key);
            await machine.input(1);
            console.log(machine.currentState.key);
            await machine.input(1);
            console.log(machine.currentState.key);
            await machine.input(0);
            console.log(machine.currentState.key);
            await machine.input(1);
            console.log(machine.currentState.key);
        }

        init().then(performInput);
    </script>
</body>
</html>